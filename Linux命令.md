[TOC]

# Linux

## Linux操作命令（一）

### 1.1 文件目录操作命令 

#### 1.1.1 ls命令

​	ls 命令是 linux 下最常用的命令，ls 命令就是 list 的缩写。 ls 用来打印出当前目录的清单。如果 ls 指定其他目录，那么就会显示指定目录里的文件及文件夹清单。 通过 ls 命令不仅可以查看 linux 文件夹包含的文件，而且可以查看文件权限(包括目录、文件夹、文件权限)查看目录信息等等 。

​	命令格式：ls （选项）  目录名

| 参数 | 描述                                                         |
| ---- | ------------------------------------------------------------ |
| -a   | –all 列出目录下的所有文件，包括以 . 开头的隐含文件           |
| -l   | 除了文件名之外，还将文件的权限、所有者、文件大小等信息详细列出来 |
| -d   | –directory 将目录象文件一样显示，而不是显示其下的文件        |
| -h   | –human-readable 以容易理解的格式列出文件大小 (例如 1K 234M 2G) |
| -t   | 以文件修改时间排序                                           |

参数可以连着用：`ls -alh /home`

#### 1.1.2 cd命令

​	cd 命令可以说是 Linux 中最基本的命令语句，其他的命令语句要进行操作，都是建立在使用 cd 命令上的。cd 命令是 change directory 的缩写,切换当前目录至指定的目录。

​	命令格式： cd 目录名

 	进入系统根目录：cd /

 	进入父目录：cd ..

​	进入当前用户主目录：cd ~

​	进入上次目录：cd -

#### 1.1.3 pwd命令

​	Linux 中用 pwd 命令来查看“当前工作目录”的完整路径。 简单得说，每当你在终端进行操作时，你都会有一个当前工作目录。 在不太确定当前位置时，就会使用 pwd 来判定当前目录在文件系统内的确切位置。 pwd 命令是 Print Working Directory 的缩写。 

​	命令格式：pwd （选项）

| 参数 | 描述                                       |
| ---- | ------------------------------------------ |
| -P   | 显示实际物理路径，而非使用连接（link）路径 |
| -L   | 当目录为连接路径时，显示连接路径           |

#### 1.1.4 mkdir命令

​	mkdir 命令用来创建指定名称的目录，要求创建目录的用户在当前目录中具有写权限，并且指定的目录名不能是当前目录中已有的目录。 mkdir 命令是 make directory 的缩写。 

​	命令格式：mkdir （选项） 目录

| 参数           | 描述                                                         |
| -------------- | ------------------------------------------------------------ |
| -m --mode=模式 | 设定权限<模式>                                               |
| -p --parents   | 可以是一个路径名称。若路径中的某些目录尚不存在,加上此选项后,系统将自动建立好那些尚不存在的目录,即一次可以建立多个目录 |
| -v --verbose   | 每次创建新目录都显示信息                                     |

创建空目录：`mkdir test1`

递归创建多个目录：`mkdir -p test1/test11`

创建权限为777的目录：`mkdir -m 777 test2`

创建新目录都显示信息：`mkdir -v test4`

一个命令创建项目的目录结构 :

`mkdir -vp scf/{lib/,bin/,doc/{info,product},logs/{info,product},service/deploy/{info,product}}` 



#### 1.1.5 rm命令

​	rm 是常用的命令，该命令的功能为删除一个目录中的一个或多个文件或目录，它也可以将某个目录及其下的所有文件及子目录均删除。对于链接文件，只是删除了链接，原有文件均保持不变。

​	rm 是一个危险的命令，使用的时候要特别当心，尤其对于新手，否则整个系统就会毁在这个命令（比如在/（根目录）下执行 rm * -rf）。所以，我们在执行 rm 之前最好先确认一下在哪个目录，到底要删除什么东西，操作时保持高度清醒的头脑。

​	rm 命令是 remove 的缩写。

​	命令格式： `rm (选项) 文件或目录`

| 参数             | 描述                                               |
| ---------------- | -------------------------------------------------- |
| -f --force       | 忽略不存在的文件，从不给出提示                     |
| -i --interactive | 进行交互式删除                                     |
| -r --recursive   | 指示 rm 将参数中列出的全部目录和子目录均递归地删除 |
| -v --verbose     | 详细显示进行的步骤                                 |

删除文件系统会先询问是否删除 ：`rm test1.log`

系统会先询问是否删除 : `rm -f test1.log`

删除后缀名为.log 的所有，删除前逐一询问 : `rm *.log`     `rm -i  *.log`

删除目录及子目录中所有: `rm -r test`

强制删除目录及子目录中所有：`rm -rf test`

删除以 -f 开头的文件：`rm -- -f`

```sh
root@localhost test]# touch -- -f
[root@localhost test]# ls -- -f
-f[root@localhost test]# rm -- -f
rm：是否删除 一般空文件 “-f”? y
[root@localhost test]# ls -- -f
ls: -f: 没有那个文件或目录
[root@localhost test]#
```



#### 1.1.6 mv命令

​	mv 命令功能是用来移动文件或更改文件名，是 Linux 系统下常用的命令，经常用来备份文件或者目录。 mv 命令根据第二个参数类型（是目标文件还是目标目录），决定执行将文件重命名或将其移至一个新的目录中。当第二个参数类型是文件时，mv 命令完成文件重命名，此时，源文件只能有一个（也可以是源目录名），它将所给的源文件或目录重命名为给定的目标文件名。当第二个参数是已存在的目录名称时，源文件或目录参数可以有多个，mv 命令将各参数指定的源文件均移至目标目录中。 mv 命令是 move 的缩写。 

​	命令格式： `mv (选项) 源文件或目录 目标文件或目录`

| 参数             | 描述                                                         |
| ---------------- | ------------------------------------------------------------ |
| -b --back        | 若需覆盖文件，则覆盖前先行备份                               |
| -f --force       | 如果目标文件已经存在，不会询问而直接覆盖                     |
| -i --interactive | 若目标文件已经存在时，就会询问是否覆盖                       |
| -u --update      | 若目标文件已经存在，且源文件比较新，才会更新                 |
| -t --target      | 该选项适用于移动多个源文件到一个目录的情况，此时目标目录在前，源文件在后 |

文件改名： `mv test1.log test2.txt`

移动文件：`mv text.txt /usr/test2`

移动多个文件：`mv text* ../test1`



#### 1.1.7 cp命令

​	cp 命令用来复制文件或者目录，是 Linux 系统中最常用的命令之一。一般情况下，shell 会设置一个别名，在命令行下复制文件时，如果目标文件已经存在，就会询问是否覆盖，不管你是否使用-i 参数。但是如果是在 shell 脚本中执行 cp 时，没有-i 参数时不会询问是否覆盖。这说明命令行和 shell 脚本的执行方式有些不同。 cp 命令是 copy 的缩写。 

​	命令格式：：`cp (选项)  源文件  目录`   `cp  (选项)  -t 目录  源文件`

| 参数                  | 描述                                                         |
| --------------------- | ------------------------------------------------------------ |
| -t --target-directory | 指定目标目录                                                 |
| -i --interactive      | 覆盖前询问(使前面的 -n 选项失效)                             |
| -n --no-clobber       | 不要覆盖已存在的文件(使前面的 -i 选项失效)                   |
| -s --symbolic-link    | 对源文件建立符号链接，而非复制文件                           |
| -f --force            | 强行复制文件或目录， 不论目的文件或目录是否已经存在          |
| -u --update           | 使用这项参数之后，只会在源文件的修改时间较目的文件更新时，或是对应的目的文件并不存在，才复制文件 |

复制单个文件到目标目录：`cp test.log /usr/test2`

复制文件，覆盖前询问： `cp -i test1/*  test2`



#### 1.1.8 cat命令

​	cat 命令的功能是将文件或标准输入组合输出到标准输出。这个命令常用来显示文件内容，或者将几个文件连接起来显示，或者从标准输入读取内容并显示，它常与重定向符号配合使用。 cat 命令是 concatenate 的缩写。 

​	命令格式： `cat (选项) 文件`

| 参数                  | 描述                                             |
| --------------------- | ------------------------------------------------ |
| -A --show-all         | 等价于 -vET                                      |
| -b --number-nonblank  | 对非空输出行编号                                 |
| -e                    | 等价于 -vE                                       |
| -E --show-ends        | 在每行结束处显示 $                               |
| -n --number           | 对输出的所有行编号,由 1 开始对所有输出的行数编号 |
| -s --squeeze-blank    | 有连续两行以上的空白行，就代换为一行的空白行     |
| -t                    | 与 -vT 等价                                      |
| -T --show-tabs        | 将跳格字符显示为 ^I                              |
| -u                    | (被忽略)                                         |
| -v --show-nonprinting | 使用 ^ 和 M- 引用，除了 LFD 和 TAB 之外          |

内容加上行号：`cat -n text.txt` 



#### 1.1.9 touch命令

​	linux的touch命令不常用，一般在使用make的时候可能会用到，用来修改文件时间戳，或者新建一个不存在的文件。 

​	命令格式：`touch (选项) 文件`

| 参数 | 描述                                                         |
| ---- | ------------------------------------------------------------ |
| -a   | 只更改存取时间                                               |
| -c   | 不建立任何文档                                               |
| -d   | 使用指定的日期时间，而非现在的时间                           |
| -m   | 只更改变动时间                                               |
| -r   | 把指定文档或目录的日期时间，统统设成和参考文档或目录的日期时间相同。 |
| -t   | 使用指定的日期时间，而非现在的时间。                         |



#### 1.1.10 nl命令

​	nl 命令在 linux 系统中用来计算文件中行号。nl 可以将输出的文件内容自动的加上行号。其默认的结果与 cat -n 有点不太一样， nl 可以将行号做比较多的显示设计，包括位数与是否自动补齐 0 等等的功能。 nl 命令是 number of lines 的缩写。 ·

​	命令格式： `nl （选项）文件`

| 参数  | 描述                                            |
| ----- | ----------------------------------------------- |
| -b    | 指定行号指定的方式，主要有两种：                |
| -b a  | 表示不论是否为空行，也同样列出行号(类似 cat -n) |
| -b t  | 如果有空行，空的那一行不要列出行号(默认值)      |
| -n    | 列出行号表示的方法，主要有三种：                |
| -n ln | 行号在屏幕的最左方显示                          |
| -n rn | 行号在自己栏位的最右方显示，且不加 0            |
| -n rz | 行号在自己栏位的最右方显示，且加 0              |
| -w    | 行号栏位的占用的位数                            |

#### 1.1.11 more命令

​	more 命令，功能类似 cat ，cat 命令是将整个文件的内容从上到下显示在屏幕上。 more 命令会一页一页的显示，方便使用者逐页阅读，而最基本的指令就是按空白键（space）往下一页显示，按 b 键就会往回（back）一页显示，而且还有搜寻字串的功能 。more 命令从前向后读取文件，因此在启动时就加载整个文件。 

​	命令格式： `more (选项) 文件`



| 参数      | 描述                                                         |
| --------- | ------------------------------------------------------------ |
| +n        | 从笫 n 行开始显示                                            |
| -n        | 定义屏幕大小为 n 行                                          |
| +/pattern | 在每个档案显示前搜寻该字串（pattern），然后从该字串前两行之后开始显示 |
| -c        | 从顶部清屏，然后显示                                         |
| -d        | 提示“Press space to continue，’q’ to quiet”，禁用响铃功能    |
| -p        | 通过清除窗口而不是滚屏来对文件进行换页，与-c 选项相似        |
| -s        | 把连续的多个空行显示为一行                                   |
| -u        | 把文件内容中的下画线去掉                                     |

| 符号   | 描述             |
| ------ | ---------------- |
| =      | 输出当前行的行号 |
| q      | 退出 more        |
| 空格键 | 向下滚动一屏     |
| b      | 返回上一屏       |

显示文件中从第三行起的内容： `more +3 text.txt`

从文件中查找第一个出现"xxx"字符串的行，并从该处前两行开始显示输出  : `more +/xxx text.txt`

设定每屏显示行数 : `more +5 text.txt`

列一个目录下的文件，内容太多，用more来分页显示 : `ls -l | more -5`    `ll /etc | more -10`



#### 1.1.12 less命令

​	less 工具也是对文件或其它输出进行分页显示的工具，应该说是 linux 正统查看文件内容的工具，功能极其强大。 	

​	命令格式：`less (选项) 文件`

| 参数 | 描述                                                 |
| ---- | ---------------------------------------------------- |
| -e   | 当文件显示结束后，自动离开                           |
| -f   | 强迫打开特殊文件，例如外围设备代号、目录和二进制文件 |
| -i   | 忽略搜索时的大小写                                   |
| -m   | 显示类似 more 命令的百分比                           |
| -N   | 显示每行的行号                                       |
| -s   | 显示连续空行为一行                                   |

| 符号    | 描述                                 |
| ------- | ------------------------------------ |
| /字符串 | 向下搜索“字符串”的功能               |
| ?字符串 | 向上搜索“字符串”的功能               |
| n       | 重复前一个搜索（与 / 或 ? 有关）     |
| N       | 反向重复前一个搜索（与 / 或 ? 有关） |
| b       | 向前翻一页                           |
| d       | 向后翻半页                           |
| q       | 退出 less 命令                       |
| 空格键  | 向后翻一页                           |
| 向上键  | 向上翻动一行                         |
| 向下键  | 向下翻动一行                         |

查看文件： `less text.txt`

查看进程信息并通过less分页显示: `ps -ef |less`

查看命令历史使用记录并通过less分页显示 : `history | less`

浏览多个文件：`less text1.txt text2.txt`

**1.全屏导航**

ctrl + F - 向前移动一屏

ctrl + B - 向后移动一屏

ctrl + D - 向前移动半屏

ctrl + U - 向后移动半屏

**2.单行导航**

j - 向前移动一行

k - 向后移动一行

**3.其它导航**

G - 移动到最后一行

g - 移动到第一行

q / ZZ - 退出 less 命令

**4.其它有用的命令**

v - 使用配置的编辑器编辑当前文件

h - 显示 less 的帮助文档

&pattern - 仅显示匹配模式的行，而不是整个文件

**5.标记导航**

当使用 less 查看大文件时，可以在任何一个位置作标记，可以通过命令导航到标有特定标记的文本位置：

ma - 使用 a 标记文本的当前位置

'a - 导航到标记 a 处



#### 1.1.13 head命令

​	head 命令就像它的名字一样浅显易懂，主要是用来显示档案的开头至标准输出中，默认 head 命令打印其相应文件的开头 10 行。 

​	命令格式： `head (选项) 文件`

| 参数     | 描述       |
| -------- | ---------- |
| -q       | 隐藏文件名 |
| -v       | 显示文件名 |
| -c<字节> | 显示字节数 |
| -n<行数> | 显示的行数 |

显示文件的前5行：`head -n 5 text.txt` 

显示文件前n个字节 : `head -c 20 text.txt`

显示多个文件前5行内容： `head -n 5  text1.txt  text2.txt`

显示 文件中除了最后 5 行的内容 : `head -n -5 text.txt`



#### 1.1.14 tail命令

​	tail 命令主要用于显示指定文件末尾内容。常用查看日志文件。

​	命令格式： `tail (选项)  文件`

| 参数     | 描述               |
| -------- | ------------------ |
| -f       | 循环读取           |
| -q       | 不显示处理信息     |
| -v       | 显示详细的处理信息 |
| -c<字节> | 显示的字节数       |
| -n<行数> | 显示行数           |

显示文件末尾5行内容：`tail -n  5   log2019.log` 

循环查看文件内容 :  `ping www.bilibili.com   > bili.log &`    `tail -f bili.log` 

从第5行开始显示文件 : `tail -n  +5 bili.log`